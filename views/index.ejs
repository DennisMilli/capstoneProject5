<%- include("partials/header.ejs") %>
<section class="matchday-section">
    <div class="matchday-bar" role="region" aria-label="Matchday navigation">
        <a class="matchday-arrow" href="/?matchday=<%= matchday > 1 ? matchday - 1 : 1 %>" aria-label="Previous matchday">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M15 6L9 12l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </a>
        
        <div class="matchday-pill">
            <div class="md-pill-inner">
                Matchday 
                <span class="matchday-number"><%= matchday %></span> 
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevrons-down-icon lucide-chevrons-down"><path d="m7 6 5 5 5-5"/><path d="m7 13 5 5 5-5"/></svg>
            </div>  
            <div class="md-picker-body">
                <div class="md-picker-viewport" tabindex="0" role="listbox" aria-label="Matchday options">
                </div>
          
                <div class="md-picker-indicator" aria-hidden="true"></div>
              </div>
        </div>
        
        <a class="matchday-arrow" href="/?matchday=<%= matchday + 1 %>" aria-label="Next matchday">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </a>
    </div>
</section>
<section id="matches-grid">
    <div class="league-header">
        <div class="league-info">
            <div class="league-flag">
                <img src="<%= leagueImage %>" alt="<%= leagueName || 'League Logo' %> Logo">
            </div>
          <p class="leaguename"><%= leagueName || 'Premier League' %></p>
        </div>
    </div>
    <div class="matches-grid">
        <% matches.forEach(match => { %>
            <a href="/match/<%= match.id %>" class="match-card-link">
                <div class="match-card">
                    <div class="match-content">
                        <div class="teams-section">
                            <!-- Home -->
                            <div class="team-row">
                                <div class="team-left">
                                    <div class="team-flag">
                                        <img src="<%= match.homeFlag || '/images/flag-placeholder.png' %>" alt="<%= match.home %> flag" />
                                    </div>
                                    <span class="team-name"><%= match.home %></span>
                                </div>
                                <span class="team-score"><%= match.scoreHome %></span>
                            </div>
                            <!-- Away -->
                            <div class="team-row">
                                <div class="team-left">
                                    <div class="team-flag">
                                        <img src="<%= match.awayFlag || '/images/flag-placeholder.png' %>" alt="<%= match.away %> flag" />
                                    </div>
                                    <span class="team-name"><%= match.away %></span>
                                </div>
                                <span class="team-score"><%= match.scoreAway %></span>
                            </div>
                        </div>
                        <div class="divider-section">
                            <div class="vertical-divider"></div>
                        </div>   
                        <div class="match-info">
                            <div class="match-date"><%= match.date %></div>
                            <div class="match-status"><%= match.status %></div>
                        </div>
                    </div>
                    
                    <div class="card-footer">
                        <div class="venue">
                            <svg class="location-icon" viewBox="0 0 24 24">
                                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                            </svg>
                            <span><%= match.venue %></span>
                        </div>
                        <button class="view-button">See What Fans Think</button>
                    </div>
                </div>
            </a>
        <% }) %>
    </div>
</section>
<section id="standings-container">
    <div class="standings-section">
        
    <div class="league-header">
        <div class="league-info">
            <div class="league-flag">
                <img src="<%= leagueImage %>" alt="<%= leagueName || 'League Logo' %> Logo">
            </div>
          <p class="standings-title"><%= leagueName + ' Standings' || 'Premier League Standings' %></p>
        </div>
    </div>
    
    <div class="table-scroll">
        <table class="standings-table">
            <thead>
                <tr>
                    <th></th>
                    <th>Team</th>
                    <th>PL</th>
                    <th class="wins-header">W</th>
                    <th class="wins-header">L</th>
                    <th class="gd-header">GD</th>
                    <th class="gfga-header">GF</th>
                    <th class="gfga-header">GA</th>
                    <th>Pts</th>
                </tr>
            </thead>
            <tbody>
                <% standings.forEach((team, index) => { 
                    const gd = team.gf - team.ga;
                    let rowClass = "";
                    if (index < 5) rowClass = "ucl-zone";           // Champions League
                    else if (index < 7) rowClass = "uel-zone";      // Europa
                    else if (index < 8) rowClass = "uecl-zone";      // Conference League
                    else if (index >= standings.length - 3) rowClass = "relegation-zone"; // Relegation
                    %>
                    <tr class="<%= rowClass %>">
                        <td><%= index + 1 %></td>
                        <td class="team-cell">
                            <div class="team-info">
                                <div class="team-flag">
                                    <img src="<%= team.flag || '/images/flag-placeholder.png' %>" alt="<%= team.team %> flag" />
                                    </div>
                                    <span class="team-name"><%= team.team %></span>
                                    </div>
                                    </td>
                                    <td><%= team.played %></td>
                                    <td class="wins"><%= team.wins %></td>
                                    <td class="wins"><%= team.losses %></td>
                                    <td class="gd"><%= gd %></td>
                                    <td class="gfga"><%= team.gf %></td>
                                    <td class="gfga"><%= team.ga %></td>
                                    <td class="points"><%= team.points %></td>
                                    </tr>
                            <% }) %>
                        </tbody>
                    </table>
    </div>
</div>
</section>
<section class="articles-section">
  <div class="section-title">
      <h2>Trending topics</h2>
  </div>

  <div id="articles-grid" class="articles-grid">

    <% articles.forEach(article => { %>
        <article class="article-card">
            <a href="/article/<%= article.slug %>" class="article-link">
                <img src="<%= article.image %>" alt="<%= article.title %>" class="article-img" />

                <div class="article-content">
                    <h3 class="article-title"><%= article.title %></h3>
                    <p class="article-summary"><%= article.summary %></p>

                    <div class="article-meta">
                    <p class="upload-time"><%= article.time %> | <%= article.category %></p>

                    <svg class="share-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-forward-icon">
                        <path d="m15 17 5-5-5-5"/>
                        <path d="M4 18v-2a4 4 0 0 1 4-4h12"/>
                    </svg>
                    </div>
                </div>
            </a>
        </article>
    <% }) %>

  </div>

  <button id="showMoreBtn" class="show-more">Show More</button>
</section>

<%- include("partials/modals.ejs") %>
<%- include("partials/footer.ejs") %>